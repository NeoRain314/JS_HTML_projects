<!DOCTYPE html>
<html>
  <head>
    <title>Warrior Cats Clan Sim</title>
    <meta charset="utf-8" />
    <style>
      .normButton {
        display: inline-block;
        border: 2px solid #1e944b;
        border-radius: 4px;
        background-color: #a2e0a7;
        color: #1e944b;
        font-size: 16px;
        font-weight: bold;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        text-transform: uppercase;
        box-shadow: 0 2px 2px rgba(0, 0, 0, 0.1);
      }

      .normButton:hover {
        background-color: #81b385;
        cursor: pointer;
      }

      .catButtons {
        display: inline-block;
        padding: 12px 32px;
        font-size: 16px;
        font-weight: bold;
        text-align: center;
        text-decoration: none;
        text-transform: uppercase;
        color: #fff;
        background-color: #4c9ef1;
        background-image: linear-gradient(to bottom, #5fb881, #1e944b);
        border-radius: 50px;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .catButtons:hover {
        transform: translateY(5px);
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      }

      .catButtons:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(27, 77, 31, 0.4);
      }

      h1 {
        font-size: 48px;
        font-weight: bold;
        text-align: center;
        color: #1e944b;
        text-shadow: 3px 3px 0 rgba(133, 201, 139, 0.5);
      }

      #left-div {
        float: left;
        width: 65%;
      }

      #right-div {
        float: right;
        width: 30%;
      }

      .container {
        overflow: hidden;
      }
    </style>
  </head>

  <body>
    <h1>Warrior Cats Clan Sim</h1>

    <div class="container">
<!------------------------------>
      <div id="left-div">
        <br />
        <div id="catButtons"> </div>
        <br />
          <div>
            <p id="catInfoBox"> </p>
          </div>
      </div>
<!------------------------------>
      <div id="right-div">
        <p id="day"> Day: 0</p>
        <br />
        <button class="normButton" onclick="endDay()">End Day</button>
        <br />
        <br />
        
        <form id="clanActionForm">
          <!-- <input type="checkbox" name="clanAction" value="option-1" /> call Clan Meeting <br /> -->  
        </form>
      </div>
<!------------------------------>      
    </div>

    <script>
      // ------------------------ ''variables'' ----------------------------------------- //
      const CAT_RANKS = {
        LEADER: "Leader",
        DEPUTY: "Deputy",
        MEDECINE_CAT: "Medecine Cat",
        WARRIOR: "Warrior",
        APPRENTICE: "Apprentice",
        KIT: "Kit",
        ELDER: "Elder",
      };
      
      const CAT_PRAEFIX = [
        "Oak",
        "Night",
        "Brown",
        "Silver",
        "Ivy",
      ]
      
      const CAT_SUFFIX = [
        "fur",
        "tail",
        "pelt",
        "storm",
        "fall",
      ]

      let allCats = [];
      let days = 0;

      // ------------------------ ''create functions'' ----------------------------------------- //

      function createClan() { // inizialisiere Game
        for (i = 0; i < 5; i++) {
          allCats.push(createCat());
        }
        createClanAction("huntingPatrol", "Hunting Patrol");
        createClanAction("borderPatrol", "Border Patrol");
        createClanAction("herbPatrol", "Herb Patrol");
        console.log(allClanActions);
        return allCats;
      }

      function createCat() {
        let cat = {
          pr채fix: "pr채fix",
          suffix: "suffix",
          furColor: 1, // images which have numbers
          daysOld: 0, // age in days
          rank: "no rank",
          catButton: null,
        };
        
        cat.daysOld = getRandomNumber(1000);
        cat.pr채fix = getRandomElement(CAT_PRAEFIX);
        cat.suffix = getRandomElement(CAT_SUFFIX); 

        cat.getName = function () {
          return this.pr채fix + this.suffix ;
        };
        createCatButton(cat);
        updateCatRankAndNames(cat);
        return cat;
      }

      function createUI() {
        // I do this in createCat();
        // for (i = 0; i < allCats.length; i++) {
        //   createCatButton(allCats[i]);
        // }
      }

      function createCatButton(cat) {
        var div = document.getElementById("catButtons");
        var button = document.createElement("button"); // create button
        button.textContent = cat.getName(); // text on buttone = cat name
        //button.id = "my-button";
        button.className = "catButtons";
        button.onclick = function () {
          showCatInfos(cat);
        };
        div.appendChild(button);
        cat.catButton = button;
      }
      
      let allClanActions = {};

      function createClanAction(checkboxValue, checkboxText){
        let a = {};
        a.checkboxValue = checkboxValue;
        a.checkboxText = checkboxText;

        { 
          //create Checkbox
          var form = document.getElementById("clanActionForm");
          var checkbox = document.createElement("input"); // create checkBox
          //set properties
          checkbox.className = "checkbox";
          checkbox.type = "checkbox";
          checkbox.name = "clanAction";
          checkbox.value = checkboxValue;
          checkbox.checked = false;
          checkbox.id = checkboxValue;

          var label = document.createElement('label');
          label.htmlFor = checkboxValue; //id

          label.appendChild(document.createTextNode(checkboxText));
    
          form.appendChild(checkbox); // add checkbox to form
          form.appendChild(label); // add the text
          form.appendChild(document.createElement("br")); //new line
        }

        allClanActions[checkboxValue] = a;
      }

      // ------------------------ '' Functions '' ----------------------------------------- //

      function computeNextDay() {
        clanTurns = allCats.length *3;
        getChecked("clanAction");
      }
      
      function showCatInfos(cat) {
        console.log(cat.getName());
        let p = document.getElementById("catInfoBox");
        p.innerHTML = cat.getName() + "<br/>" + computeMoons(cat.daysOld) + " moons" + "<br/> "+ cat.rank;
      }

      function endDay() {
        computeNextDay();

      //count days up
        days++;
        console.log(days);
        let p = document.getElementById("day")
        p.innerHTML = "Day: " + days
        
      //unselect all options
        let checkboxes = document.getElementsByName("clanAction");
        for(var i = 0; i < checkboxes.length; i++) {
          checkboxes[i].checked = false;
        }
      //clear cat info box
        let p2 = document.getElementById("catInfoBox");
        p2.innerHTML ="";
        
      //update cats
        for(let i = 0; i < allCats.length; i++) {
          let cat = allCats[i];
          cat.daysOld+= 1; //change age
          updateCatRankAndNames(cat); // update rank and name by age and also button
        }
      
        
      }
      
      function getRandomElement(array){
        let e = array[getRandomNumber(array.length)];
        return e;
      }
      
      function computeMoons(days){
        let m = days/30;
        return Math.floor(m);
      }
      
      function getRandomNumber(max){
        let r = Math.random() * max;
        return Math.floor(r);
      }
      
      function updateCatRankAndNames(cat){
          
          //update rank
          if(computeMoons(cat.daysOld) < 6) {
            cat.rank = CAT_RANKS.KIT; //kit
          } else if(computeMoons(cat.daysOld) < 12){
            cat.rank = CAT_RANKS.APPRENTICE; //apprentice
          } else if(computeMoons(cat.daysOld) < 80){
            if(cat.rank != CAT_RANKS.LEADER && cat.rank != CAT_RANKS.DEPUTY && cat.rank != CAT_RANKS.MEDECINE_CAT) {
              cat.rank = CAT_RANKS.WARRIOR; //warrior if not lead, dep or med
            }
          } else {
            cat.rank = CAT_RANKS.ELDER;
          }
          
          //update suffix
          if(cat.rank == CAT_RANKS.KIT) {
            cat.suffix = "kit";
          } else if(cat.rank == CAT_RANKS.APPRENTICE){
            cat.suffix = "paw";
          }else if(cat.rank == CAT_RANKS.LEADER){
            cat.suffix = "star";
          }else {
            cat.suffix = getRandomElement(CAT_SUFFIX);
          }
          
          //update cat button
          cat.catButton.textContent = cat.getName(); // update name on button
          
      }



      function getChecked(name) { //gets the checked boxes of one name
        var options = document.getElementsByName(name); 
        var checkedOptions = []; 

        for (var i = 0; i < options.length; i++) {
          if (options[i].checked) {
            checkedOptions.push(options[i].value);
          }
        }

        console.log(checkedOptions);
      }
        
      // ------------------------ '' Game '' ----------------------------------------- //

      console.log(createClan());
      createUI();
    </script>
  </body>
</html>


